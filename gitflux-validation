#!/usr/bin/env sh


validate_mandatory_arg() {
	if [[ -z $1 ]]; then
		usage
	fi
}

validate_git_flux_initialized() {
	if [[ $(git_config_get "initialized") != true ]]; then
		io_status_fatal "git-flux is not initialized. you have to run 'git flux init' first."
	fi
}

validate_git_clean_working_tree() {
	if ! git_is_clean_working_tree; then
		io_status_fatal "working tree is not clean. make sure all changes are commited, or stash them." 
	fi
}

validate_git_local_branch_exists() {
	if ! git_local_branch_exists "$1"; then
		io_status_fatal "branch '$1' don't exist locally."
	fi
}

validate_git_remote_branch_exists() {
	if ! git_remote_branch_exists "origin/$1"; then
		io_status_fatal "branch '$1' don't exist on the remote."
	fi
}

validate_git_local_branch_dont_exist() {
	if git_local_branch_exists "$1"; then
		io_status_fatal "branch '$1' already exists locally."
	fi
}

validate_git_remote_branch_dont_exist() {
	if git_remote_branch_exists "origin/$1"; then
		io_status_fatal "branch '$1' already exists on the remote."
	fi
}

validate_git_local_and_remote_branches_exist() {
	validate_git_local_branch_exists "$1"
	validate_git_remote_branch_exists "$1"
}

validate_git_local_and_remote_branches_dont_exist() {
	validate_git_local_branch_dont_exist "$1"
	validate_git_remote_branch_dont_exist "$1"
}

validate_git_tag_exists() {
	if ! git_tag_exists "$1"; then
		io_status_fatal "tag '$1' don't exist."
	fi
}

validate_git_tag_not_exists() {
	if git_tag_exists "$1"; then
		io_status_fatal "tag '$1' already exists."
	fi
}
