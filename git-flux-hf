#!/usr/bin/env sh


USAGE="hf <start|finish> <name> [tag] [-h]"

LONG_USAGE="${t_bold}${t_fg_red}hf${t_off}
--

handle lifecycle of hot-fixes.


${t_under}available actions${t_off}

   ${t_bold}start <name> <tag>${t_off}
      start a hot-fix; create a local branch and push it to the remote.
      the branch name will be composed of the pre-configured hot-fix prefix and the passed ${t_bold}name${t_off}.
      the passed ${t_bold}tag${t_off} will be used as the branch base.

   ${t_bold}finish <name>${t_off}
      finish an existing release-candidate; delete its local and remote branches, for good.
 "


cmd_start() {
	USAGE="hf start <name> <tag> [-h]"
	require_args "$1" "$2"
	io_log; create_branch_from_tag "$(git_config_get "prefix.hf")$1" "$2"
	io_log; io_log_ok "hot-fix '$1' is started. good luck!"; io_log
}

cmd_finish() {
	USAGE="hf finish <name> [-h]"
	require_args "$1"
	io_log; destroy_branch_from_tag "$(git_config_get "prefix.hf")$1"
	io_log; io_log_ok "hot-fix '$1' is finished. goodbye!"; io_log
}
