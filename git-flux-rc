#!/usr/bin/env sh


USAGE="rc <start|finish> <next-version> [-h]"
LONG_USAGE="---"


cmd_start() {
	validate_mandatory_arg "$1"
	io_log "starting release candidate '$1'..."
	create_branch_from_base "$(git_config_get "prefix.rc")$1" "$(git_config_get "branch.integration")"
	io_log_ok "release candidate '$1' is created. congrats!"

	# optional tagging of RC forks, it's here should we need it sometime
#	local tag="$(git_tag_template "$next_version" "-rc")"
#	validate_git_tag_not_exists "$tag"
#	git_create_tag $tag "version '$next_version' release candidate"
#	git_push $tag
}

cmd_finish() {
	validate_mandatory_arg "$1"
	io_confirm "the local and remote branches of '$1' will be deleted, forever! continue?" "i knew you'd chicken out."
	io_log "finishing release candidate '$1'..."
	destroy_branch_from_base "$(git_config_get "prefix.rc")$1"
	io_log_ok "release candidate '$1' is finished. goodbye!"
}
